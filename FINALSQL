
SELECT
    Jobs.*,
    JobCategories.*,
    JobTypes.*

FROM jobs Jobs
    LEFT JOIN (
        jobs_personalities JobsPersonalities,
        personalities Personalities,
        jobs_practical_skills JobsPracticalSkills,
        practical_skills PracticalSkills,
        jobs_basic_abilities JobsBasicAbilities,
        basic_abilities BasicAbilities,
        jobs_tools JobsTools,
        affiliates Tools,
        jobs_career_paths JobsCareerPaths,
        jobs_rec_qualifications JobsRecQualifications,
        affiliates RecQualifications,
        affiliates ReqQualifications,
        affiliates CareerPaths,
        jobs_req_qualifications JobsReqQualifications 
    ) ON (
        JobsPersonalities.job_id=Jobs.id AND
        (
            Personalities.id=JobsPersonalities.personality_id AND
            Personalities.deleted IS NULL
        ) AND
        JobsPracticalSkills.job_id=Jobs.id AND
        (
            PracticalSkills.id = JobsPracticalSkills.practical_skill_id AND
            PracticalSkills.deleted IS NULL
        ) AND
        JobsBasicAbilities.job_id = Jobs.id AND
        (
            BasicAbilities.id = JobsBasicAbilities.basic_ability_id AND
            BasicAbilities.deleted IS NULL
        ) AND
        JobsTools.job_id = Jobs.id AND
        (
            Tools.type = 1
            AND Tools.id = JobsTools.affiliate_id
            AND Tools.deleted IS NULL
        ) AND 
        JobsCareerPaths.job_id = Jobs.id AND
        (
            CareerPaths.type = 3
            AND CareerPaths.id = JobsCareerPaths.affiliate_id
            AND CareerPaths.deleted IS NULL
        ) AND
        JobsRecQualifications.job_id = Jobs.id AND
        (
            RecQualifications.type = 2
            AND RecQualifications.id = JobsRecQualifications.affiliate_id
            AND RecQualifications.deleted IS NULL
        ) AND
        JobsReqQualifications.job_id = Jobs.id AND
        (
            ReqQualifications.type = 2
            AND ReqQualifications.id = JobsReqQualifications.affiliate_id
            AND ReqQualifications.deleted IS NULL
        )
    )
    INNER JOIN (
        job_categories JobCategories,
        job_types JobTypes
    )
    ON (
        (
            JobCategories.id = Jobs.job_category_id
            AND JobCategories.deleted IS NULL
        ) AND
        (
            JobTypes.id = (Jobs.job_type_id)
            AND (JobTypes.deleted) IS NULL
        )
    )

WHERE (
    (
        JobCategories.name LIKE '%キャビンアテンダント%'
        OR JobTypes.name LIKE '%キャビンアテンダント%'
        OR Jobs.name LIKE '%キャビンアテンダント%'
        OR Jobs.description LIKE '%キャビンアテンダント%'
        OR Jobs.detail LIKE '%キャビンアテンダント%'
        OR Jobs.business_skill LIKE '%キャビンアテンダント%'
        OR Jobs.knowledge LIKE '%キャビンアテンダント%'
        OR Jobs.location LIKE '%キャビンアテンダント%'
        OR Jobs.activity LIKE '%キャビンアテンダント%'
        OR Jobs.salary_statistic_group LIKE '%キャビンアテンダント%'
        OR Jobs.salary_range_remarks LIKE '%キャビンアテンダント%'
        OR Jobs.restriction LIKE '%キャビンアテンダント%'
        OR Jobs.remarks LIKE '%キャビンアテンダント%'
        OR Personalities.name LIKE '%キャビンアテンダント%'
        OR PracticalSkills.name LIKE '%キャビンアテンダント%'
        OR BasicAbilities.name LIKE '%キャビンアテンダント%'
        OR Tools.name LIKE '%キャビンアテンダント%'
        OR CareerPaths.name LIKE '%キャビンアテンダント%'
        OR RecQualifications.name LIKE '%キャビンアテンダント%'
        OR ReqQualifications.name LIKE '%キャビンアテンダント%'
    )
        
    AND publish_status = 1
    AND (Jobs.deleted) IS NULL)
    
    GROUP BY Jobs.id
    ORDER BY Jobs.sort_order desc,
    
    Jobs.id DESC LIMIT 50 OFFSET 0